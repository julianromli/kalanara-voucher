#!/usr/bin/env node\n\n/**\n * Test script untuk Supabase Keep-Alive functionality\n * Run: node scripts/test-keep-alive.js\n */\n\nconst SUPABASE_URL = 'https://kginxwtmcdvqbnwmlctw.supabase.co';\nconst SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtnaW54d3RtY2R2cWJud21sY3R3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQzNjE3MTEsImV4cCI6MjA3OTkzNzcxMX0.uGOjsCvg71eUmVmHHx_Jagmvqa1hphdQsXEfDrXct_o';\n\nasync function testKeepAlive() {\n  console.log('üß™ Testing Supabase Keep-Alive Function...');\n  \n  try {\n    // Test Edge Function\n    console.log('üì° Testing Edge Function...');\n    const response = await fetch(`${SUPABASE_URL}/functions/v1/keep-alive`, {\n      method: 'POST',\n      headers: {\n        'Authorization': `Bearer ${SUPABASE_ANON_KEY}`,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        source: 'test_script',\n        timestamp: new Date().toISOString()\n      })\n    });\n    \n    const result = await response.json();\n    console.log('‚úÖ Edge Function Response:', result);\n    \n    if (!response.ok) {\n      throw new Error(`Edge Function failed: ${response.status}`);\n    }\n    \n    // Test Database Query\n    console.log('üóÑÔ∏è Testing Database Query...');\n    const dbResponse = await fetch(`${SUPABASE_URL}/rest/v1/keep_alive?select=*&order=created_at.desc&limit=3`, {\n      headers: {\n        'apikey': SUPABASE_ANON_KEY,\n        'Authorization': `Bearer ${SUPABASE_ANON_KEY}`,\n        'Content-Type': 'application/json'\n      }\n    });\n    \n    const dbData = await dbResponse.json();\n    console.log('üìä Recent Database Activity:', dbData);\n    \n    // Test Simple Database Ping\n    console.log('üîÑ Testing Simple Database Ping...');\n    const pingResponse = await fetch(`${SUPABASE_URL}/rest/v1/`, {\n      headers: {\n        'apikey': SUPABASE_ANON_KEY,\n        'Authorization': `Bearer ${SUPABASE_ANON_KEY}`,\n        'Content-Type': 'application/json'\n      }\n    });\n    \n    console.log('üèì Database Ping Status:', pingResponse.status);\n    \n    console.log('\\nüéâ All tests completed successfully!');\n    console.log('‚úÖ Supabase should remain active for another 7 days');\n    \n  } catch (error) {\n    console.error('‚ùå Test failed:', error.message);\n    process.exit(1);\n  }\n}\n\ntestKeepAlive();
